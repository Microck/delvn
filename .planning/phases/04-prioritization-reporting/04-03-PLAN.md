---
phase: 04-prioritization-reporting
plan: 03
type: execute
wave: 3
depends_on: ["04-02"]
files_modified:
  - src/models/brief.py
  - src/reporting/__init__.py
  - src/reporting/render.py
  - src/agents/reporter_agent.py
  - tests/test_brief_render.py
autonomous: true
must_haves:
  truths:
    - "Reporter produces a readable executive brief from prioritized threats"
    - "Brief output includes top items, why they matter, and recommended next steps"
  artifacts:
    - path: "src/models/brief.py"
      provides: "Brief data structure (sections + entries)"
    - path: "src/agents/reporter_agent.py"
      provides: "Reporter agent (prioritized threats -> brief markdown)"
  key_links:
    - from: "src/agents/reporter_agent.py"
      to: "src/reporting/render.py"
      via: "render_markdown"
      pattern: "render_"
---

<objective>
Implement the Reporter Agent to generate an executive brief from prioritized threats.

Purpose: Deliver the hackathon "executive brief" output that communicates business value.
Output: brief model + markdown renderer + reporter agent.
</objective>

<execution_context>
@/home/ubuntu/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/ubuntu/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/REQUIREMENTS.md
@.planning/phases/04-prioritization-reporting/04-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Define brief model</name>
  <files>src/models/brief.py</files>
  <action>
Create `src/models/brief.py` with Pydantic models:
- `BriefEntry`: `headline`, `relevance`, `why_it_matters`, `evidence` (list[str]), `recommended_actions` (list[str])
- `ExecutiveBrief`: `generated_at`, `stack_summary`, `top_risks` (list[BriefEntry]), `notable_mentions` (list[BriefEntry])
  </action>
  <verify>python3 -c "from models.brief import ExecutiveBrief; ExecutiveBrief.model_json_schema()"</verify>
  <done>Brief model is importable</done>
</task>

<task type="auto">
  <name>Task 2: Add markdown renderer and reporter agent</name>
  <files>
src/reporting/__init__.py
src/reporting/render.py
src/agents/reporter_agent.py
  </files>
  <action>
Create `src/reporting/render.py` with `render_brief_md(brief: ExecutiveBrief) -> str`.

Create `src/agents/reporter_agent.py` with `run_reporting()`:
- Call `run_prioritization()` (or accept its output as a parameter)
- Build an `ExecutiveBrief` with:
  - stack summary (from user config)
  - top 3-5 HIGH/MEDIUM items
  - a few notable mentions
- Render markdown and (optionally) persist it to Cosmos or write to `docs/example_brief.md` (Phase 5 will formalize demo outputs)

Keep it deterministic by default; if Foundry/LLM is later wired in, it can enrich text but should not be required to run.
  </action>
  <verify>python3 -c "from agents.reporter_agent import run_reporting"</verify>
  <done>Reporter agent entrypoint is importable</done>
</task>

<task type="auto">
  <name>Task 3: Add renderer tests</name>
  <files>tests/test_brief_render.py</files>
  <action>
Add a test that builds a minimal `ExecutiveBrief`, renders markdown, and asserts key headings/sections exist.
  </action>
  <verify>python3 -m pytest -q</verify>
  <done>Brief rendering tests pass</done>
</task>

</tasks>

<verification>
- `python3 -m pytest -q` passes
</verification>

<success_criteria>
- A single command can generate a readable markdown brief from the demo stack + ingested threats
</success_criteria>

<output>
After completion, create `.planning/phases/04-prioritization-reporting/04-03-SUMMARY.md`
</output>
